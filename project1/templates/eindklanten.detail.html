{% extends 'base.html' %}
{% block title %}Eindklant/datails{% endblock %}

{% block body %}
<html lang="">
<head>
<style>

table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#basic-datatable1_wrapper {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

#basic-datatable2_wrapper {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

#vestiging {
    text-align: center;
}

#contactpers {
    text-align: center;
}

#opmerking {
    white-space: nowrap;
    white-space: pre;
    max-width: 140px;
    overflow: scroll;
}

#telefoonnummer {
    max-width: 75px;
}

#contactpersNaam {
    max-width: 70px;
}

#mailAdres {
    max-width: 140px;
    overflow: scroll;
}

#functie {
    max-width: 100px;
}

#vestigingPlaatsHeader {
    max-width: 130px;
}

#vestigingPlaats{
    white-space: nowrap;
    max-width: 130px;
    overflow: scroll;
}

#contactpersNaam {
    max-width: 80px;
}

#vestigToevoegen {
    margin-bottom: 2px;
}

#deleteUpdate {
    max-width: 105px;
}

#actieKnoppen {
    max-width: 115px;
}

</style>
</head>
<script>
$(document).ready(function() {
    $("#basic-datatable1").DataTable({
      pageLength: 10,
      lengthChange: false,
      bInfo : false,
      order: [[ 0, "asc" ]],
      dom: 'Bfrtip',
        buttons: [ {
            extend: 'excelHtml5',
            exportOptions: {
                    columns: [ 0, 1, 2, 3, 4]
                },
            title: 'Medewerker aanbiedingen' +
                '' +
                ' Export',
            customize: function( xlsx ) {
                var sheet = xlsx.xl.worksheets['sheet1.xml'];

                $('row c[r^="C"]', sheet).attr( 'c', '2' );
            }
        } ]
    });
  });
</script>

<section id="detail">
    <table>
        <tr>
            <th>Eindklant naam:</th><td>{{ eindklant_pk.klantnaam }}</td>
            <th>4-Rest contactpersoon:</th><td>{{ eindklant_pk.get_accountmanager_display }}</td></tr>
            <th>Telefoonnummer eindklant:</th><td>{{ eindklant_pk.telefoonnummer_klant }}</td>
            <th>Portaal eindklant:</th><td><a href="{{ eindklant_pk.portaal_klant }}" target="_blank">{{eindklant_pk.portaal_klant}}</a></td></tr>
            <tr>
                <td>
                    <a href="{% url 'eindklant_update' eindklant_pk.id %}" class="btn btn-primary" role="button">Update</a>
                    <input class="btn btn-primary" type=button value="Terug" onClick="javascript:history.go(-1);">
                </td>
            </tr>
    </table>
</section>

<section id="vestiging">
    <h3 style="text-align: center; margin-top: 1%; margin-bottom: 1%;">Vestiging adressen</h3>
    <a id="VestigingToevoegen" href="{% url 'vestiging_toevoegen' eindklant_pk.id %}" class="btn btn-primary" role="button">Vestiging Toevoegen</a>

    <table id="basic-datatable1" class="table1">
        <thead>
            <tr>
                <th>Vestiging</th>
                <th>Postcode</th>
                <th>Straatnaam</th>
                <th>Huisnummer</th>
                <th>Plaats</th>
                <th>Opmerkingen</th>
                <th id="deleteUpdate">Update / Delete</th>
            </tr>
        </thead>
        <tbody id="myTable">
            {% for vestiging in vestiging_lijst %}
                <tr>
                    <td>{{ vestiging.vestiging }}</td>
                    <td>{{ vestiging.postcode }}</td>
                    <td>{{ vestiging.straatnaam }}</td>
                    <td>{{ vestiging.huisnummer }}</td>
                    <td>{{ vestiging.plaats }}</td>
                    <td id="opmerking">{{ vestiging.opmerkingen }}</td>

                    <form action="{% url 'vestiging_delete' vestiging.pk %}" method="post" style="display: inline;">
                        {% csrf_token %}
                            <td id="deleteUpdate">
                                <a href="{% url 'vestiging_updaten' vestiging.id %}"  class="btn btn-primary btn-sm" role="button">Update</a>
                                <button type="submit" class="no-export btn btn-danger btn-sm" onclick="return confirm('Weet je zeker dat je deze vestiging wilt verijderen?')">
                                <span class="glyphicon glyphicon-remove"></span>&nbsp; Delete </button>
                            </td>
                    </form>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<script>
$(document).ready(function() {
    $("#basic-datatable2").DataTable({
      pageLength: 4,
      lengthChange: false,
      bInfo : false,
      order: [[ 0, "asc" ]],
      "columnDefs": [
          { "searchable": false, "targets": 5 }
      ],
      dom: 'Bfrtip',
        buttons: [ {
            extend: 'excelHtml5',
            exportOptions: {
                    columns: [ 0, 1, 2, 3, 4]
                },
            title: 'Medewerker aanbiedingen' +
                '' +
                ' Export',
            customize: function( xlsx ) {
                var sheet = xlsx.xl.worksheets['sheet1.xml'];

                $('row c[r^="C"]', sheet).attr( 'c', '2' );
            }
        } ]
    });
  });
</script>

<section id="contactpers">
    <h3 style="text-align: center;">Contactpersonen</h3>
    <a id="ContactpersoonToevoegen" href="{% url 'toevoegen.contactpersoon' eindklant_pk.id %}" class="btn btn-primary" role="button">Contactpersoon Toevoegen</a>


    <table id="basic-datatable2" class="table1">
        <thead>
            <tr>
                <th id="contactpersNaam">Naam</th>
                <th>Mail adres</th>
                <th id="telefoonnummer">Telefoonnummer</th>
                <th id="functie">Functie</th>
                <th id="vestigingPlaatsHeader">Vestiging en plaats</th>
                <th id="actieKnoppen">Actie knoppen</th>
            </tr>
        </thead>
        <tbody id="myTable">
            {% for contactpersoon in contactpersoon_lijst %}
                <tr>
                    <td id="contactpersNaam">{{ contactpersoon.naam }}</td>
                    <td id="mailAdres">{{ contactpersoon.mail_adres }}</td>
                    <td id="telefoonnummer">{{ contactpersoon.telefoonnummer }}</td>
                    <td id="functie">{{ contactpersoon.functie }}</td>
                    <td id="vestigingPlaats">{{ contactpersoon.vestiging.vestiging }} {{ contactpersoon.vestiging.plaats }}</td>

                    <form action="{% url 'delete_contactpersoon' contactpersoon.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                            <td id="actieKnoppen">
                                <a href="{% url 'update_contactpersoon' contactpersoon.id %}" class="btn btn-primary btn-xs" role="button">Update</a>
                                <a href="{% url 'detail_contactpersonen' contactpersoon.id %}" class="btn btn-primary btn-xs" role="button">Detail</a>
                                <button type="submit" class="no-export btn btn-danger btn-xs" onclick="return confirm('Weet je zeker dat je deze contactpersoon wilt verijderen?')">
                                <span class="glyphicon glyphicon-remove"></span>&nbsp; Delete </button>
                                <a id="vestigToevoegen" name="vestigContact" value="contactpersoon" href="{% url 'toevoegen_ContactVestiging' contactpersoon.id %}" class="btn btn-primary btn-xs" role="button" style="margin-top: 1px">Vestiging Toevoegen</a>
                            </td>
                    </form>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

	<h1 class="title">{{ eindklant_pk.opmerking_title }}</h1>

	<small> {{ eindklant_pk.opmerking_date_added }}</small>

	<p><strong>{{ eindklant_pk.opmerking_intro }}</strong></p>

	<p>{{ eindklant_pk.opmerking_body }}</p>




</html>

{% endblock %}

