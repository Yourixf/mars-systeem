{% extends 'base.html' %}

{% block title %}Tussenpartijen {% endblock %}
{% block body %}
<div style="text-align: center;"><h3>Tussenpartijen 4-Rest</h3><a href="{% url 'brokers_toevoegen' %}" class="btn btn-success"  role="button"><h5>Tussenpartijen Toevoegen</h5></a></div>
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
    <style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

#telNummer {
    max-width: 100px;
}

#portaal {
    max-width: 300px;
    overflow: hidden;
}

#deleteUpdate {
    max-width: 105px;
}

#detail {
    max-width: 60px;
}

</style>
{% endblock %}
{% block content %}


<script>
$(document).ready(function() {
    $("#basic-datatable").DataTable({
      pageLength: 10,
      lengthChange: false,
      bInfo : false,
      order: [[ 0, "asc" ]],
      dom: 'Bfrtip',
        buttons: [ {
            extend: 'excelHtml5',
            exportOptions: {
                    columns: [ 0, 1, 2, 3, 4 ]
                },
            title: 'Brokers' +
                '' +
                ' Export',
            customize: function( xlsx ) {
                var sheet = xlsx.xl.worksheets['sheet1.xml'];

                $('row c[r^="C"]', sheet).attr( 'c', '2' );
            }
        } ]
    });
  });
</script>
<br><br>

<table id="basic-datatable" class="dataTables_wrapper no-footer" style="width:100%">

        <thead>
        <tr>
            <th>Tussenpartij naam:</th>
            <th>4-Rest contactpersoon:</th>
            <th>Email adres factuur:</th>
            <th id="telNummer">Telefoonnummer tussenpartij:</th>
            <th id="portaal">Portaal tussenpartij:</th>
            <th id="deleteUpdate" class="no-export">Update / Delete</th>
            <th id="detail" class="no-export">Detail</th>
        </tr>

        <tbody id="myTable">
            {% for broker in brokers_list %}
                <tr>
                    <td>{{ broker.naam }}</td>
                    <td>{{ broker.get_accountmanager_display }}</td>
                    <td>{{ broker.factuuremail }}</td>

                    <td id="telNummer">{{ broker.telefoonnummer }}</td>
                    <td id="portaal"><a href="{{ broker.portaal }}" target="_blank">{{broker.portaal}}</a></td>

                    <form action="{% url 'broker_delete' broker.id %}" method="post" class="no-export" style="display: inline;">
                        {% csrf_token %}
                        <td id="deleteUpdate">
                            <a href="{% url 'broker_update' broker.id %}" class="no-export btn btn-primary btn-sm" role="button">Update</a>
                            <input type="hidden" name="medewerker_id" value="{{ Brokers.id }}" />
                            <button type="submit" class="no-export btn btn-danger btn-sm" onclick="return confirm('Weet je zeker dat je de broker wilt verijderen?')">
                            <span class="glyphicon glyphicon-remove"></span>&nbsp; Delete </button>
                        </td>
                        <td id="detail">
                            <a href="{% url 'broker_detail' broker.id %}"  class="no-export btn btn-success btn-sm" role="button">View Details</a>
                            <input type="hidden" name="medewerker_id" value="{{ brokers_list.id }}" />
                        </td>
                    </form>
                </tr>
            {% endfor %}
        </tbody>
</table>

<script>


</script>


</table>
<br><br><br>
{% endblock %}

